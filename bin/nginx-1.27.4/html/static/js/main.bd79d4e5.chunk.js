(this.webpackJsonptrees=this.webpackJsonptrees||[]).push([[0],{16:function(e,t,n){},21:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);n(16);var o=n(4),a=n(11),s=n.n(a),i=n(0),d=n(12),c=n(13),r=n(14),l=n(15);const h=new d.a;let p;const w=new i.h;let u,m,b,j,f,g,x,M,v,O,y=.01,S=1;const R=[2,10],z=[.75,.9];let C=.5,k=!0,E=!0,T=25,L=40,B=95,F=3,A=1e4,H=3680024,N=7039494,P=16777215;const Q=()=>{b=new i.mb,b.background=new i.i(16777215);!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const o=new i.t(16777215,16777215,.3);if(o.color=e,o.groundColor.setHSL(.095,1,.75),o.position.set(0,50,0),t.add(o),n){const e=new i.u(o,10);t.add(e)}}((new i.i).setHSL(.6,1,.6),b),function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new i.k(16777215,1);if(n.color.setHSL(.1,1,.95),n.position.set(-1,1.75,1),n.position.multiplyScalar(30),e.add(n),n.castShadow=!0,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=2048,n.shadow.camera.left=-40,n.shadow.camera.right=40,n.shadow.camera.top=40,n.shadow.camera.bottom=-40,t){const t=new i.l(n,10);e.add(t)}}(b);const e=new i.cb(1e3,1e3);v=new i.Q({color:P});const t=new i.O(e,v);t.position.y=-40,t.rotation.x=-Math.PI/2,t.receiveShadow=!0,b.add(t),m=new i.Db({antialias:1===window.devicePixelRatio,powerPreference:"high-performance"}),m.setSize(720,360),m.setPixelRatio(window.devicePixelRatio),m.outputEncoding=i.Eb,m.shadowMap.enabled=!0,document.body.appendChild(m.domElement),M=new l.a,j=new i.bb(30,2,1,500),j.position.set(0,100,200),g=new c.a(j,m.domElement),x=new r.a(j,m.domElement),b.add(x),x.addEventListener("mouseDown",(function(){g.enabled=!1})),x.addEventListener("mouseUp",(function(){g.enabled=!0})),window.addEventListener("keydown",(function(e){switch(e.key.toUpperCase()){case"R":x.setMode("rotate");break;case"V":x.setMode("translate")}}))};function I(e){S>4?p.traverse((e=>{e instanceof i.s&&(e.name.includes("\u6811\u5e72")?e.rotation.x=i.M.degToRad($(-4,4)*y):Math.random()>.6&&(e.rotation.x=i.M.degToRad($(-10,10)*y)))})):p.traverse((e=>{if(e instanceof i.s&&1===e.children.length){const t=e.children[0];t instanceof i.s&&Math.random()>.6&&function(e){const t=e.parent,n=i.M.randInt(0,1e4);i.M.seededRandom(n);const o=i.M.degToRad(360*i.M.seededRandom())*y,a=i.M.degToRad(360*i.M.seededRandom())*y,s=q();t.rotation.x=o+s;const d=q();t.rotation.z=a+d}(t)}}))}function q(){return(Math.cos(w.elapsedTime)+1)/2*.001*50}function D(e,t,n,o){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e/20;const s=.66*a,d=new i.s,c=new i.Bb(0,1,0);if(d.position.set(t.x,t.y,t.z),e<F)return U(d),void p.add(d);const r=(new i.i).setHex(H).offsetHSL(0,i.M.seededRandom()/10,i.M.seededRandom()/8),l=((e,t,n,o)=>{const a=new i.j(e,t,n,6,1),s=new i.Q({color:o}),d=new i.O(a,s);return d.receiveShadow=!0,d.castShadow=!0,d})(s,a,e,r);O++,d.add(l),d.name="\u6811\u5e72"+O,p.add(d),l.position.y+=e/2,d.rotation.z=n,c.applyAxisAngle(new i.Bb(0,0,1),n),d.rotation.y=o,c.applyAxisAngle(new i.Bb(0,1,0),o),c.multiplyScalar(e);const h=t.clone().add(c),w=e===T;if(e>T/3&&!w){const e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const o=new i.qb(e,16,16),a=new i.Q({color:t,transparent:!0,opacity:n}),s=new i.O(o,a);return s.receiveShadow=!0,s.castShadow=!0,s}(1.5*s,r);d.add(e)}else w||(U(d),p.add(d));const u=i.M.seededRandom()<1-C?V(1,2):V(3,4);for(let p=0;p<u;p++)n=i.M.degToRad($(-B,B)),o=i.M.degToRad($(-B,B)),D(e*i.M.mapLinear(F,R[0],R[1],z[0],z[1]),h,n,o,s)}const J=()=>{if(requestAnimationFrame(J),w.getElapsedTime(),I(),!k){const e=200;j.position.x=u.position.x+e*Math.cos(.4*w.elapsedTime),j.position.z=u.position.z+e*Math.sin(.4*w.elapsedTime),j.position.y=90+(u.position.y+35*Math.sin(.2*w.elapsedTime)),j.lookAt(u.position)}g.update(),M.update(),m.render(b,j)};function U(e){const t=L*i.M.seededRandom(),n=i.M.degToRad(360*i.M.seededRandom()),o=i.M.degToRad(360*i.M.seededRandom()),a=(new i.i).setHex(N).offsetHSL(i.M.seededRandom()/10,i.M.seededRandom()/10,i.M.seededRandom()/8);if(!E)return;const s=f.clone();s.rotation.setFromVector3(new i.Bb(0,0,0));const d=(new i.c).setFromObject(s),c=d.getCenter(new i.Bb),r=d.getSize(new i.Bb);s.scale.set(t,t,t),d.setFromObject(s),d.getCenter(c),d.getSize(r),(new i.c).setFromObject(s).getCenter(s.position),s.position.add(new i.Bb(0,0,r.z/2)),s.position.multiplyScalar(-1),s.position.copy(c).multiplyScalar(-1);let l=new i.s;l.add(s),s.position.z-=.45*r.z,s.position.x+=.0075*r.x,s.position.y+=.01*r.y,l.rotation.x=n,l.rotation.z=o,s.traverse((function(e){if(e){var t=new i.Q({color:a});e.material=t,e.castShadow=!0,e.receiveShadow=!0}})),e.add(l)}function V(e,t){return Math.floor(i.M.seededRandom()*(t-e+1)+e)}function $(e,t){return i.M.seededRandom()*(t-e)+e}var W=n(31),_=(n(21),n(3));var G=()=>{const[e,t]=Object(o.useState)(null),[n,a]=Object(o.useState)(!0),[s,i]=Object(o.useState)(null),[d,c]=Object(o.useState)(null),[r,l]=Object(o.useState)(39.9042),[h,p]=Object(o.useState)(116.4074),w={shanghai:{lat:31.2304,lon:121.4737},shenzhen:{lat:22.5431,lon:114.0579},dongying:{lat:37.4343,lon:118.6857},haidian:{lat:39.957,lon:116.3075}},u=e=>(e-273.15).toFixed(2);Object(o.useEffect)((()=>{(async()=>{try{const e=await W.a.get(`https://api.openweathermap.org/data/2.5/weather?lat=${r}&lon=${h}&appid=7749ab343a0f2c1e02c676ee8ac2f822`),n=e.data.wind.speed;(async e=>{e>=0&&e<1?(y=.01,S=1):e>=1&&e<2?(S=2,y=.05):e>=2&&e<3?(S=3,y=.09):e>=3&&e<4?(S=4,y=.2):e>=4&&e<5?(S=5,y=.5):(S=5,y=.4)})(n);const o=m(n);c(o),t(e.data),a(!1)}catch(s){i(s),a(!1)}})()}),[r,h]);const m=e=>e>=0&&e<.6?"1\u7ea7\uff1a\u8f7b\u98ce":e>=.6&&e<1.6?"2\u7ea7\uff1a\u548c\u98ce":e>=1.6&&e<3.4?"3\u7ea7\uff1a\u5fae\u98ce":e>=3.4&&e<5.5?"4\u7ea7\uff1a\u6e05\u98ce":e>=5.5&&e<8?"5\u7ea7\uff1a\u5f3a\u98ce":e>=8&&e<10.8?"6\u7ea7\uff1a\u52b2\u98ce":e>=10.8&&e<13.9?"7\u7ea7\uff1a\u75be\u98ce":e>=13.9&&e<17.2?"8\u7ea7\uff1a\u5927\u98ce":e>=17.2&&e<20.8?"9\u7ea7\uff1a\u70c8\u98ce":e>=20.8&&e<24.5?"10\u7ea7\uff1a\u66b4\u98ce":"11\u7ea7\uff1a\u72c2\u98ce",b=e=>{l(w[e].lat),p(w[e].lon)};return n?Object(_.jsx)("div",{children:"Loading..."}):s?Object(_.jsxs)("div",{children:["Error occurred: ",s.message]}):Object(_.jsxs)("div",{className:"weather-container",children:[Object(_.jsxs)("h1",{children:["\u56fd\u5bb6 ",e.sys.country]}),Object(_.jsxs)("p",{children:["\u57ce\u5e02 ",e.name]}),Object(_.jsxs)("p",{children:["\u5929\u6c14:",e.weather[0].description+" ","\u98ce\u529b: ",d," \u98ce\u5411: ",(j=e.wind.deg,j>=0&&j<45?"\u5317\u98ce (North)":j>=45&&j<90?"\u4e1c\u5317\u98ce (Northeast)":j>=90&&j<135?"\u4e1c\u98ce (East)":j>=135&&j<180?"\u4e1c\u5357\u98ce (Southeast)":j>=180&&j<225?"\u5357\u98ce (South)":j>=225&&j<270?"\u897f\u5357\u98ce (Southwest)":j>=270&&j<315?"\u897f\u98ce (West)":j>=315&&j<360?"\u897f\u5317\u98ce (Northwest)":"\u672a\u77e5\u65b9\u5411"),"  "]}),Object(_.jsxs)("p",{children:["\u6e29\u5ea6: ",u(e.main.temp)," \xb0C \u4f53\u611f: ",u(e.main.feels_like)," \xb0C   \u6e7f\u5ea6: ",e.main.humidity,"%"]}),Object(_.jsxs)("div",{className:"city-selector",children:[Object(_.jsx)("button",{onClick:()=>b("shanghai"),children:"\u4e0a\u6d77"}),Object(_.jsx)("button",{onClick:()=>b("shenzhen"),children:"\u6df1\u5733"}),Object(_.jsx)("button",{onClick:()=>b("dongying"),children:"\u4e1c\u8425"}),Object(_.jsx)("button",{onClick:()=>b("haidian"),children:"\u6d77\u6dc0"})]}),Object(_.jsxs)("div",{className:"coordinates-input",children:[Object(_.jsxs)("label",{children:["\u7ecf\u5ea6:",Object(_.jsx)("input",{type:"number",value:h,onChange:e=>p(parseFloat(e.target.value))})]}),Object(_.jsxs)("label",{children:["\u7eac\u5ea6:",Object(_.jsx)("input",{type:"number",value:r,onChange:e=>l(parseFloat(e.target.value))})]})]})]});var j};const K=()=>Object(_.jsxs)("div",{children:[Object(_.jsx)(G,{}),Object(_.jsx)("div",{id:"app"})]});s.a.render(Object(_.jsx)(K,{}),document.getElementById("root")),(async()=>{const e=await h.loadAsync("assets/leaf/scene.gltf");f=e.scene.clone(),f.name="leaf",f.castShadow=!0,f.receiveShadow=!0,Q(),i.M.seededRandom(A),b.remove(p),p=new i.s,D(T,new i.Bb(0,0,0),0,0,T/10),b.add(p),p.position.set(0,-40,0),J()})()}},[[29,1,2]]]);
//# sourceMappingURL=main.bd79d4e5.chunk.js.map