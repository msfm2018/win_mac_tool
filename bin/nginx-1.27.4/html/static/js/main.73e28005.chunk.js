(this.webpackJsonptrees=this.webpackJsonptrees||[]).push([[0],{16:function(e,t,n){},21:function(e,t,n){},29:function(e,t,n){"use strict";n.r(t);n(16);var s=n(4),o=n(11),a=n.n(o),i=n(0),d=n(12),c=n(13),r=n(14),l=n(15);const h=new d.a;let p;const j=new i.h;let m,w,b,u,x,O,g,f,y,v,M=.01,S=1;const R=[2,10],C=[.75,.9];let z=.5,T=!0,k=!0,E=25,L=40,B=95,F=3,A=1e4,H=3680024,N=7039494,P=16777215;const D=()=>{b=new i.mb,b.background=new i.i(16777215);!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];const s=new i.t(16777215,16777215,.3);if(s.color=e,s.groundColor.setHSL(.095,1,.75),s.position.set(0,50,0),t.add(s),n){const e=new i.u(s,10);t.add(e)}}((new i.i).setHSL(.6,1,.6),b),function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];const n=new i.k(16777215,1);if(n.color.setHSL(.1,1,.95),n.position.set(-1,1.75,1),n.position.multiplyScalar(30),e.add(n),n.castShadow=!0,n.shadow.mapSize.width=2048,n.shadow.mapSize.height=2048,n.shadow.camera.left=-40,n.shadow.camera.right=40,n.shadow.camera.top=40,n.shadow.camera.bottom=-40,t){const t=new i.l(n,10);e.add(t)}}(b);const e=new i.cb(1e3,1e3);y=new i.Q({color:P});const t=new i.O(e,y);t.position.y=-40,t.rotation.x=-Math.PI/2,t.receiveShadow=!0,b.add(t),w=new i.Db({antialias:1===window.devicePixelRatio,powerPreference:"high-performance"}),w.setSize(720,360),w.setPixelRatio(window.devicePixelRatio),w.outputEncoding=i.Eb,w.shadowMap.enabled=!0,document.body.appendChild(w.domElement),f=new l.a,u=new i.bb(30,2,1,500),u.position.set(0,100,200),O=new c.a(u,w.domElement),g=new r.a(u,w.domElement),b.add(g),g.addEventListener("mouseDown",(function(){O.enabled=!1})),g.addEventListener("mouseUp",(function(){O.enabled=!0})),window.addEventListener("keydown",(function(e){switch(e.key.toUpperCase()){case"R":g.setMode("rotate");break;case"V":g.setMode("translate")}}))};function Q(e){S>4?p.traverse((e=>{e instanceof i.s&&(e.name.includes("\u6811\u5e72")?e.rotation.x=i.M.degToRad(V(-4,4)*M):Math.random()>.6&&(e.rotation.x=i.M.degToRad(V(-10,10)*M)))})):p.traverse((e=>{if(e instanceof i.s&&1===e.children.length){const t=e.children[0];t instanceof i.s&&Math.random()>.6&&function(e){const t=e.parent,n=i.M.randInt(0,1e4);i.M.seededRandom(n);const s=i.M.degToRad(360*i.M.seededRandom())*M,o=i.M.degToRad(360*i.M.seededRandom())*M,a=_();t.rotation.x=s+a;const d=_();t.rotation.z=o+d}(t)}}))}function _(){return(Math.cos(j.elapsedTime)+1)/2*.001*50}function I(e,t,n,s){let o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:e/20;const a=.66*o,d=new i.s,c=new i.Bb(0,1,0);if(d.position.set(t.x,t.y,t.z),e<F)return J(d),void p.add(d);const r=(new i.i).setHex(H).offsetHSL(0,i.M.seededRandom()/10,i.M.seededRandom()/8),l=((e,t,n,s)=>{const o=new i.j(e,t,n,6,1),a=new i.Q({color:s}),d=new i.O(o,a);return d.receiveShadow=!0,d.castShadow=!0,d})(a,o,e,r);v++,d.add(l),d.name="\u6811\u5e72"+v,p.add(d),l.position.y+=e/2,d.rotation.z=n,c.applyAxisAngle(new i.Bb(0,0,1),n),d.rotation.y=s,c.applyAxisAngle(new i.Bb(0,1,0),s),c.multiplyScalar(e);const h=t.clone().add(c),j=e===E;if(e>E/3&&!j){const e=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;const s=new i.qb(e,16,16),o=new i.Q({color:t,transparent:!0,opacity:n}),a=new i.O(s,o);return a.receiveShadow=!0,a.castShadow=!0,a}(1.5*a,r);d.add(e)}else j||(J(d),p.add(d));const m=i.M.seededRandom()<1-z?U(1,2):U(3,4);for(let p=0;p<m;p++)n=i.M.degToRad(V(-B,B)),s=i.M.degToRad(V(-B,B)),I(e*i.M.mapLinear(F,R[0],R[1],C[0],C[1]),h,n,s,a)}const q=()=>{if(requestAnimationFrame(q),j.getElapsedTime(),Q(),!T){const e=200;u.position.x=m.position.x+e*Math.cos(.4*j.elapsedTime),u.position.z=m.position.z+e*Math.sin(.4*j.elapsedTime),u.position.y=90+(m.position.y+35*Math.sin(.2*j.elapsedTime)),u.lookAt(m.position)}O.update(),f.update(),w.render(b,u)};function J(e){const t=L*i.M.seededRandom(),n=i.M.degToRad(360*i.M.seededRandom()),s=i.M.degToRad(360*i.M.seededRandom()),o=(new i.i).setHex(N).offsetHSL(i.M.seededRandom()/10,i.M.seededRandom()/10,i.M.seededRandom()/8);if(!k)return;const a=x.clone();a.rotation.setFromVector3(new i.Bb(0,0,0));const d=(new i.c).setFromObject(a),c=d.getCenter(new i.Bb),r=d.getSize(new i.Bb);a.scale.set(t,t,t),d.setFromObject(a),d.getCenter(c),d.getSize(r),(new i.c).setFromObject(a).getCenter(a.position),a.position.add(new i.Bb(0,0,r.z/2)),a.position.multiplyScalar(-1),a.position.copy(c).multiplyScalar(-1);let l=new i.s;l.add(a),a.position.z-=.45*r.z,a.position.x+=.0075*r.x,a.position.y+=.01*r.y,l.rotation.x=n,l.rotation.z=s,a.traverse((function(e){if(e){var t=new i.Q({color:o});e.material=t,e.castShadow=!0,e.receiveShadow=!0}})),e.add(l)}function U(e,t){return Math.floor(i.M.seededRandom()*(t-e+1)+e)}function V(e,t){return i.M.seededRandom()*(t-e)+e}var $=n(31),W=(n(21),n(3));var G=()=>{const[e,t]=Object(s.useState)(null),[n,o]=Object(s.useState)(!0),[a,i]=Object(s.useState)(null),[d,c]=Object(s.useState)(null),[r,l]=Object(s.useState)(39.9042),[h,p]=Object(s.useState)(116.4074),j={shanghai:{lat:31.2304,lon:121.4737},shenzhen:{lat:22.5431,lon:114.0579},dongying:{lat:37.4343,lon:118.6857},haidian:{lat:39.957,lon:116.3075}},m=e=>(e-273.15).toFixed(2);Object(s.useEffect)((()=>{(async()=>{try{const e=await $.a.get(`https://api.openweathermap.org/data/2.5/weather?lat=${r}&lon=${h}&appid=7749ab343a0f2c1e02c676ee8ac2f822`),n=e.data.wind.speed;(async e=>{e>=0&&e<1?(M=.01,S=1):e>=1&&e<2?(S=2,M=.05):e>=2&&e<3?(S=3,M=.09):e>=3&&e<4?(S=4,M=.2):e>=4&&e<5?(S=5,M=.5):(S=5,M=.4)})(n);const s=w(n);c(s),t(e.data),o(!1)}catch(a){i(a),o(!1)}})()}),[r,h]);const w=e=>e>=0&&e<.6?"1\u7ea7\uff1a\u8f7b\u98ce":e>=.6&&e<1.6?"2\u7ea7\uff1a\u548c\u98ce":e>=1.6&&e<3.4?"3\u7ea7\uff1a\u5fae\u98ce":e>=3.4&&e<5.5?"4\u7ea7\uff1a\u6e05\u98ce":e>=5.5&&e<8?"5\u7ea7\uff1a\u5f3a\u98ce":e>=8&&e<10.8?"6\u7ea7\uff1a\u52b2\u98ce":e>=10.8&&e<13.9?"7\u7ea7\uff1a\u75be\u98ce":e>=13.9&&e<17.2?"8\u7ea7\uff1a\u5927\u98ce":e>=17.2&&e<20.8?"9\u7ea7\uff1a\u70c8\u98ce":e>=20.8&&e<24.5?"10\u7ea7\uff1a\u66b4\u98ce":"11\u7ea7\uff1a\u72c2\u98ce",b=e=>{l(j[e].lat),p(j[e].lon)};return n?Object(W.jsx)("div",{children:"Loading..."}):a?Object(W.jsxs)("div",{children:["Error occurred: ",a.message]}):Object(W.jsxs)("div",{className:"weather-container",children:[Object(W.jsxs)("h1",{children:["\u56fd\u5bb6 ",e.sys.country]}),Object(W.jsxs)("p",{children:["\u57ce\u5e02 ",e.name]}),Object(W.jsxs)("p",{children:["\u98ce\u529b: ",d," \u98ce\u5411: ",(u=e.wind.deg,u>=0&&u<45?"\u5317\u98ce (North)":u>=45&&u<90?"\u4e1c\u5317\u98ce (Northeast)":u>=90&&u<135?"\u4e1c\u98ce (East)":u>=135&&u<180?"\u4e1c\u5357\u98ce (Southeast)":u>=180&&u<225?"\u5357\u98ce (South)":u>=225&&u<270?"\u897f\u5357\u98ce (Southwest)":u>=270&&u<315?"\u897f\u98ce (West)":u>=315&&u<360?"\u897f\u5317\u98ce (Northwest)":"\u672a\u77e5\u65b9\u5411"),"  "]}),Object(W.jsxs)("p",{children:["\u6e29\u5ea6: ",m(e.main.temp)," \xb0C"]}),Object(W.jsxs)("p",{children:["\u4f53\u611f: ",m(e.main.feels_like)," \xb0C"]}),Object(W.jsxs)("div",{className:"city-selector",children:[Object(W.jsx)("button",{onClick:()=>b("shanghai"),children:"\u4e0a\u6d77"}),Object(W.jsx)("button",{onClick:()=>b("shenzhen"),children:"\u6df1\u5733"}),Object(W.jsx)("button",{onClick:()=>b("dongying"),children:"\u4e1c\u8425"}),Object(W.jsx)("button",{onClick:()=>b("haidian"),children:"\u6d77\u6dc0"})]}),Object(W.jsxs)("div",{className:"coordinates-input",children:[Object(W.jsxs)("label",{children:["\u7ecf\u5ea6:",Object(W.jsx)("input",{type:"number",value:h,onChange:e=>p(parseFloat(e.target.value))})]}),Object(W.jsxs)("label",{children:["\u7eac\u5ea6:",Object(W.jsx)("input",{type:"number",value:r,onChange:e=>l(parseFloat(e.target.value))})]})]}),Object(W.jsx)("h2",{children:"\u5177\u4f53\u4fe1\u606f"}),Object(W.jsxs)("p",{children:["\u5750\u6807: ",e.coord.lon,", ",e.coord.lat]}),Object(W.jsxs)("p",{children:["\u5929\u6c14: ",e.weather[0].main," -"," ",e.weather[0].description]}),Object(W.jsxs)("p",{children:["\u6e29\u5ea6: ",m(e.main.temp)," \xb0C"]}),Object(W.jsxs)("p",{children:["\u4f53\u611f: ",m(e.main.feels_like)," \xb0C"]}),Object(W.jsxs)("p",{children:["\u6700\u4f4e\u6e29\u5ea6: ",m(e.main.temp_min)," \xb0C"]}),Object(W.jsxs)("p",{children:["\u6700\u9ad8\u6e29\u5ea6: ",m(e.main.temp_max)," \xb0C"]}),Object(W.jsxs)("p",{children:["\u6c14\u538b: ",e.main.pressure," hPa"]}),Object(W.jsxs)("p",{children:["\u6e7f\u5ea6: ",e.main.humidity,"%"]}),Object(W.jsxs)("p",{children:["\u80fd\u89c1\u5ea6: ",e.visibility," meters"]}),Object(W.jsxs)("p",{children:["\u98ce\u901f: ",e.wind.speed," m/s, \u98ce\u5411:"," ",e.wind.deg,"\xb0, \u9635\u98ce: ",e.wind.gust," m/s"]}),Object(W.jsxs)("p",{children:["\u4e91\u91cf: ",e.clouds.all,"%"]}),Object(W.jsxs)("p",{children:["\u65e5\u671f/\u65f6\u95f4: ",new Date(1e3*e.dt).toLocaleString()]}),Object(W.jsxs)("p",{children:["\u56fd\u5bb6: ",e.sys.country]}),Object(W.jsxs)("p",{children:["\u65e5\u51fa\u65f6\u95f4: ",new Date(1e3*e.sys.sunrise).toLocaleTimeString()]}),Object(W.jsxs)("p",{children:["\u65e5\u843d: ",new Date(1e3*e.sys.sunset).toLocaleTimeString()]}),Object(W.jsxs)("p",{children:["\u65f6\u533a: ",e.timezone]}),Object(W.jsxs)("p",{children:["\u57ce\u5e02\u7f16\u53f7: ",e.id]}),Object(W.jsxs)("p",{children:["\u57ce\u5e02\u540d\u79f0: ",e.name]})]});var u};const K=()=>Object(W.jsxs)("div",{children:[Object(W.jsx)(G,{}),Object(W.jsx)("div",{id:"app"})]});a.a.render(Object(W.jsx)(K,{}),document.getElementById("root")),(async()=>{const e=await h.loadAsync("assets/leaf/scene.gltf");x=e.scene.clone(),x.name="leaf",x.castShadow=!0,x.receiveShadow=!0,D(),i.M.seededRandom(A),b.remove(p),p=new i.s,I(E,new i.Bb(0,0,0),0,0,E/10),b.add(p),p.position.set(0,-40,0),q()})()}},[[29,1,2]]]);
//# sourceMappingURL=main.73e28005.chunk.js.map